/*!
 * jQuery Rellax Plugin v0.1
 * Examples and documentation at http://pixelgrade.github.io/rellax/
 * Copyright (c) 2016 PixelGrade http://www.pixelgrade.com
 * Licensed under MIT http://www.opensource.org/licenses/mit-license.php/
 */
!function(t,e,n,i){function o(e,n){this.element=e,this.options=t.extend({},t.fn.rellax.defaults,n);var o=this,s=t(this.element),a=s.data("rellax-amount"),r=s.data("rellax-bleed");this.isContainer=s.is(o.options.container),this.$parent=s.parent().closest(o.options.container),this.options.amount=a!=i?parseFloat(a):this.options.amount,this.options.bleed=r!=i?parseFloat(r):this.options.bleed,0!=o.options.amount&&(o._reloadElement(),o._bindEvents(),l.push(o))}if(e.requestAnimationFrame){var s,a=t(e),r=a.height(),l=new Array;!function n(){t.each(l,function(t,e){e._updatePosition()}),e.requestAnimationFrame(n)}(),a.on("load resize",function(t){r=a.height()}),a.on("load scroll",function(e){s=t(e.target).scrollTop()}),t.extend(o.prototype,{constructor:o,_bindEvents:function(){var t=this;a.on("load resize",function(e){t._reloadElement()})},_reloadElement:function(){var e=this,n=t(this.element).removeAttr("style");e.$parent.length&&e.$parent.css("position","static"),e.width=n.width(),e.height=n.height(),e.offset=n.offset(),e.isContainer&&(e.width+=2*e.options.bleed,e.height+=2*e.options.bleed,e.offset.left-=e.options.bleed,e.offset.top-=e.options.bleed);var i={position:"fixed",top:e.offset.top,left:e.offset.left,width:e.width,height:e.height,marginTop:0,marginLeft:0};e.isContainer&&t.extend(i,{zIndex:-1}),e.$parent.length&&(t.extend(i,{top:e.offset.top-e.$parent.offset().top+e.options.bleed}),e.$parent.css({position:"fixed",overflow:"hidden",zIndex:-1})),n.css(i)},_isInViewport:function(t){var t=t==i||this.isContainer?0:t;return s>this.offset.top-r+t&&s<this.offset.top+this.height+t},_updatePosition:function(){var e=this,n=(s-this.offset.top+r)/(r+this.height),i=(r+this.height)*(n-.5);e._isInViewport(i)?(e.$parent.length||e.isVisible||(t(e.element).show(),e.isVisible=!0),e.isContainer?t(e.element).css("transform","translate3d(0,"+-s+"px,0)"):(i*=e.options.amount,e.$parent.length||(i-=s),t(e.element).css("transform","translate3d(0,"+i+"px,0)"))):!e.$parent.length&&e.isVisible&&(t(e.element).hide(),e.isVisible=!1)}}),t.fn.rellax=function(e){return this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new o(this,e))})},t.fn.rellax.defaults={amount:.5,bleed:0,container:"[data-rellax-container]"},t(n).ready(function(){t("[data-rellax]").rellax()})}}(jQuery,window,document);